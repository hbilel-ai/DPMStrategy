# config.yaml â€” DPM Strategy with Leveraged Execution
# Signal: QQQ (clean, liquid)
# Trade: FR0010342592 (Amundi Nasdaq-100 Daily (2x) Leveraged UCITS ETF Acc)

assets:
  - name: "Nasdaq-100 2x Leveraged"
    signal_ticker: "QQQ"                    # Used only for TMOM + SMA signals
    trade_ticker: "LQQ.PA"         # This is what we actually buy/sell (Paris listing)
    benchmark_ticker: "LQQ.PA"                 # Optional: for comparison in plot
  - name: "QQQ"
    signal_ticker: "QQQ"                    # Used only for TMOM + SMA signals
    trade_ticker: "QQQ"         # This is what we actually buy/sell (Paris listing)
    benchmark_ticker: "QQQ"                 # Optional: for comparison in plot
  - name: "SPY"
    signal_ticker: "SPY"                    # Used only for TMOM + SMA signals
    trade_ticker: "SPY"         # This is what we actually buy/sell (Paris listing)
    benchmark_ticker: "SPY"                 # Optional: for comparison in plot


  # You can add more if you want (e.g. SPY + 2x version)
  # - name: "S&P 500 2x"
  #   signal_ticker: "SPY"
  #   trade_ticker: "2SPY.PA"               # Example if exists
  #   benchmark_ticker: "SPY"

# Backtest period
start_date: "2015-01-01"        # FR0010342592 launched in 2010
end_date: "2025-12-31"

# Strategy parameters
run_sweep: False
lookback: 12
sma_period: 21
algo_mode: 'Conditional'

#--- Best Parameters for Nasdaq-100 2x Leveraged ---
#  Sharpe: 1.38 | CAGR: 41.64% | MaxDD: -34.63%
#  Best Combo: TMOM=12m, SMA=100d
#--- Best Parameters for QQQ ---
#  Sharpe: 1.54 | CAGR: 24.01% | MaxDD: -16.46%
#  Best Combo: TMOM=15m, SMA=100d
#--- Best Parameters for SPY ---
#  Sharpe: 1.45 | CAGR: 17.57% | MaxDD: -19.96%
#  Best Combo: TMOM=15m, SMA=100d


tmom_lookbacks: [1, 3, 6, 9, 12, 15]
sma_periods: [21, 50, 100, 150, 200, 250]

transaction_cost: 0.006         # 10 bps per rebalance (realistic for ETFs)
rebalance_freq: 'M'             # 'M' monthly, 'W' weekly, 'D' daily

# Execution & safety
clear_cache: true              # Set to true only if you want fresh data
output_dir: "./results"

# Optional: dry-run trading later (for future broker integration)
dry_run: true
broker: "none"                  # Will be "ibkr" or "boursorama" later

# ... (existing config like assets, start_date, etc.)

# Add this section near the top or bottom of config.yaml

# ==============================================================================
# --- LIVE BROKER SETTINGS ---
# ==============================================================================
live_broker:
  # Choose the execution method: "mock", "boursorama" (NotificationClient), or "ibkr" (IBKRClient)
  type: "boursorama" # <--- CHANGE THIS TO "ibkr"

  # Initial cash for *Mock* or *Boursorama* client (ignored by IBKR)
  manual_initial_cash: 1000.0

  ibkr:
    host: "127.0.0.1"
    port: 7497 # TWS/Gateway Port (7496 for paper, 7497 for live). IMPORTANT: Use the correct one.
    client_id: 1 # Must be a unique integer for this application instance

# ==============================================================================
# --- NOTIFICATION SETTINGS ---
# ==============================================================================
notification:
  # General settings for notifications
  enabled: True
  #types: ["Email", "WhatsApp"] # You can choose one or both
  types: ["Email"] # You can choose one or both

  # --- EMAIL CONFIGURATION (Using a service like Gmail, Outlook, etc.) ---
  email:
    smtp_server: "smtp.gmail.com"  # e.g., smtp.gmail.com (Gmail) or smtp-mail.outlook.com (Outlook)
    smtp_port: 587
    sender_email: "haithem.bilel@gmail.com"
    sender_password: "szmn edpq zswz zaxf" # Use an App Password, NOT your main password
    recipient_email: "haithem.bilel@gmail.com"
  # --- WHATSAPP CONFIGURATION (Using Twilio) ---
  # NOTE: You must install the twilio library: pip install twilio
  #whatsapp:
  #  account_sid: "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" # Your Twilio Account SID
  #  auth_token: "your_auth_token" # Your Twilio Auth Token
  #  twilio_number: "whatsapp:+14155238886" # The Twilio Sandbox/Approved WhatsApp number
  #  recipient_number: "whatsapp:+33612345678" # Your WhatsApp number (e.g., in E.164 format)
